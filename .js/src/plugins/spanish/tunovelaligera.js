var e=this&&this.__awaiter||function(e,a,t,n){return new(t||(t=Promise))((function(l,r){function i(e){try{s(n.next(e))}catch(e){r(e)}}function o(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var a;e.done?l(e.value):(a=e.value,a instanceof t?a:new t((function(e){e(a)}))).then(i,o)}s((n=n.apply(e,a||[])).next())}))},a=this&&this.__generator||function(e,a){var t,n,l,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(s){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(r=0)),r;)try{if(t=1,n&&(l=2&o[0]?n.return:o[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,o[1])).done)return l;switch(n=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=r.trys,(l=l.length>0&&l[l.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=a.call(e,r)}catch(e){o=[6,e],n=0}finally{t=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("cheerio"),n=require("@libs/fetch"),l=require("@libs/filterInputs"),r=require("@libs/defaultCover"),i=require("@libs/novelStatus"),o=function(){function o(){this.id="tunovelaligera",this.name="TuNovelaLigera",this.icon="src/es/tunovelaligera/icon.png",this.site="https://tunovelaligera.com",this.version="1.1.0",this.filters={order:{value:"rating",label:"Ordenado por",options:[{label:"Lo mas reciente",value:"latest"},{label:"A-Z",value:"alphabet"},{label:"Clasificación",value:"rating"},{label:"Trending",value:"trending"},{label:"Mas visto",value:"views"},{label:"Nuevo",value:"new-manga"}],type:l.FilterTypes.Picker},genres:{value:"",label:"Generos",options:[{label:"None",value:""},{label:"Acción",value:"accion"},{label:"Adulto",value:"adulto"},{label:"Artes Marciales",value:"artes-marciales"},{label:"Aventura",value:"aventura"},{label:"Ciencia Ficción",value:"ciencia-ficcion"},{label:"Comedia",value:"comedia"},{label:"Deportes",value:"deportes"},{label:"Drama",value:"drama"},{label:"Eastern Fantasy",value:"eastern-fantasy"},{label:"Ecchi",value:"ecchi"},{label:"FanFiction",value:"fan-fiction"},{label:"Fantasía",value:"fantasia"},{label:"Fantasía oriental",value:"fantasia-oriental"},{label:"Ficción Romántica",value:"ficcion-romantica"},{label:"Gender Bender",value:"gender-bender"},{label:"Harem",value:"harem"},{label:"Histórico",value:"historico"},{label:"Horror",value:"horror"},{label:"Josei",value:"josei"},{label:"Maduro",value:"maduro"},{label:"Mecha",value:"mecha"},{label:"Misterio",value:"misterio"},{label:"Novela China",value:"novela-china"},{label:"Novela FanFiction",value:"novela-fanfiction"},{label:"Novela Japonesa",value:"novela-japonesa"},{label:"Novela Koreana",value:"novela-koreana"},{label:"Novela ligera",value:"novela-ligera"},{label:"Novela original",value:"novela-original"},{label:"Novela Web",value:"web-novel"},{label:"Psicológico",value:"psicologico"},{label:"Realismo Mágico",value:"realismo-magico"},{label:"Recuento de vida",value:"recuento-de-vida"},{label:"Romance",value:"romance"},{label:"Romance contemporáneo",value:"romance-contemporaneo"},{label:"Romance Moderno",value:"romance-moderno"},{label:"Seinen",value:"seinen"},{label:"Shoujo",value:"shoujo"},{label:"Shounen",value:"shounen"},{label:"Sobrenatural",value:"sobrenatural"},{label:"Tragedia",value:"tragedia"},{label:"Vampiros",value:"vampiros"},{label:"Vida Escolar",value:"vida-escolar"},{label:"Western Fantasy",value:"western-fantasy"},{label:"Wuxia",value:"wuxia"},{label:"Xianxia",value:"xianxia"},{label:"Xuanhuan",value:"xuanhuan"},{label:"Yaoi",value:"yaoi"}],type:l.FilterTypes.Picker}}}return o.prototype.sleep=function(t){return e(this,void 0,void 0,(function(){return a(this,(function(e){return[2,new Promise((function(e){return setTimeout(e,t)}))]}))}))},o.prototype.popularNovels=function(l,r){return e(this,arguments,void 0,(function(e,l){var r,i,o,s,u,c,v=this,h=l.showLatestNovels,p=l.filters;return a(this,(function(a){switch(a.label){case 0:return r=this.site,r+=(null===(u=null==p?void 0:p.genres)||void 0===u?void 0:u.value)?"/genero"+p.genres.value:"/novelas",r+="/page/".concat(e,"?m_orderby="),r+=h?"latest":(null===(c=null==p?void 0:p.order)||void 0===c?void 0:c.value)||"rating",[4,(0,n.fetchApi)(r).then((function(e){return e.text()}))];case 1:return i=a.sent(),o=(0,t.load)(i),s=[],o(".page-item-detail").each((function(e,a){var t=o(a).find(".h5 > a").text(),n=o(a).find("img").attr("src"),l=o(a).find(".h5 > a").attr("href");l&&s.push({name:t,cover:n,path:l.replace(v.site,"")})})),[2,s]}}))}))},o.prototype.parseChapters=function(e){var a=this,t=[];return e("#lcp_instance_0 li").each((function(n,l){var r=e(l).find("a").text().replace(/[\t\n]/g,"").trim(),i=e(l).find("a").attr("href");i&&t.push({name:r,path:i.replace(a.site,"")})})),t},o.prototype.parseNovel=function(l){return e(this,void 0,void 0,(function(){var e,o,s,u,c,v,h,p,f;return a(this,(function(a){switch(a.label){case 0:return e=this.site+l,[4,(0,n.fetchApi)(e)];case 1:return[4,a.sent().text()];case 2:return o=a.sent(),s=(0,t.load)(o),u=1,s("ul.lcp_paginator > li > a").each((function(){var e=Number(this.attribs.title);e&&e>u&&(u=e)})),c={path:l,chapters:[],totalPages:u,name:s(".post-title > h1").text().trim()},s(".manga-title-badges").remove(),v=s(".summary_image > a > img"),c.cover=v.attr("data-src")||v.attr("src")||v.attr("data-cfsrc")||r.defaultCover,s(".post-content_item").each((function(){var e=s(this).find(".summary-heading > h5").text().trim(),a=s(this).find(".summary-content").text().trim();switch(e){case"Género(s)":c.genres=a.replace(/, /g,",");break;case"Autor(es)":c.author=a;break;case"Estado":c.status=a.includes("OnGoing")||a.includes("Updating")?i.NovelStatus.Ongoing:i.NovelStatus.Completed}})),c.summary=s("div.summary__content > p").text().trim(),c.chapters=this.parseChapters(s),h=s("#lcp_instance_0 li").first(),p=s(h).find("a").attr("href"),f=s(h).find("a").text().replace(/[\t\n]/g,"").trim(),c.latestChapter=p?{path:p.replace(this.site,""),name:f}:void 0,[2,c]}}))}))},o.prototype.parsePage=function(l,r){return e(this,void 0,void 0,(function(){var e,i;return a(this,(function(a){switch(a.label){case 0:return e=this.site+l+"?lcp_page0="+r,[4,(0,n.fetchApi)(e).then((function(e){return e.text()}))];case 1:return i=a.sent(),[2,{chapters:this.parseChapters((0,t.load)(i))}]}}))}))},o.prototype.parseChapter=function(l){return e(this,void 0,void 0,(function(){var e,r;return a(this,(function(a){switch(a.label){case 0:return[4,(0,n.fetchApi)(this.site+l)];case 1:return[4,a.sent().text()];case 2:return e=a.sent(),r=(0,t.load)(e),[2,r(".c-blog-post.post").html()||""]}}))}))},o.prototype.searchNovels=function(l){return e(this,void 0,void 0,(function(){var e,r,i,o,s=this;return a(this,(function(a){switch(a.label){case 0:return e="".concat(this.site,"/?s=").concat(l,"&post_type=wp-manga"),[4,(0,n.fetchApi)(e)];case 1:return[4,a.sent().text()];case 2:return r=a.sent(),i=(0,t.load)(r),o=[],i(".c-tabs-item__content").each((function(e,a){var t=i(a).find(".h4 > a").text(),n=i(a).find("img").attr("src"),l=i(a).find(".h4 > a").attr("href");l&&o.push({name:t,cover:n,path:l.replace(s.site,"")})})),[2,o]}}))}))},o}();exports.default=new o;